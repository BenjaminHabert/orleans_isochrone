(function(e){function t(t){for(var n,s,i=t[0],l=t[1],u=t[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/orleans_isochrone/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),o=r.n(n);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("MainMap")],1)},a=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100vh",width:"100%"}},[e.showMap?r("l-map",{attrs:{zoom:e.zoom,center:e.center,options:e.mapOptions},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),r("l-control",{staticClass:"legend",staticStyle:{width:"300px"}},[r("p",[e._v(" Cette carte montre le "),r("b",[e._v("temps de trajet en transports en commun pour Orléans")]),e._v(". Déplacez le point de départ représenté par le marqueur. ")]),r("div",[r("label",{attrs:{for:"select-day"}},[e._v("Jour de départ:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDay,expression:"selectedDay"}],attrs:{id:"select-day"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDay=t.target.multiple?r:r[0]}}},e._l(e.parameterConfig.possibleDays,(function(t){return r("option",{key:t[0],domProps:{value:t[0]}},[e._v(e._s(t[1]))])})),0)]),r("div",[r("label",{attrs:{for:"select-hour"}},[e._v("Heure de départ:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedHour,expression:"selectedHour"}],attrs:{id:"select-hour"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedHour=t.target.multiple?r:r[0]}}},e._l(e.parameterConfig.possibleHours,(function(t){return r("option",{key:t[0],domProps:{value:t[0]}},[e._v(e._s(t[1]))])})),0)]),r("div",{staticStyle:{display:"grid"}},e._l(e.parameterConfig.durations,(function(t){return r("div",{key:t.minutes,staticStyle:{display:"inline-flex","align-items":"baseline"}},[r("div",{style:"margin:5px;width:20px;height:10px;background-color:"+t.color}),e._v(" "+e._s(t.minutes)+" min ")])})),0)]),r("l-marker",{attrs:{"lat-lng":e.marker,draggable:!0},on:{"update:latLng":function(t){e.marker=t},"update:lat-lng":function(t){e.marker=t},dragend:e.innerClick}},[r("l-tooltip",{attrs:{options:{interactive:!0}}},[r("div",[e._v("Déplacez le point de départ")])])],1),r("Isochrone",{attrs:{lat:e.marker.lat,lng:e.marker.lng,marker:e.marker,day:e.selectedDay,hour:e.selectedHour}}),r("Debug",{attrs:{marker:e.marker,currentZoom:e.currentZoom,currentCenter:e.currentCenter,selectedDay:e.selectedDay,selectedHour:e.selectedHour}})],1):e._e()],1)},i=[],l=r("e11e"),u=r("2699"),c=r("a40a"),p=r("4e2b"),d=r("31dc"),m=r("2253"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("l-control",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"legend",attrs:{position:"bottomright"}},[r("p",[e._v("Debug")]),r("p",[e._v("First marker is placed at "+e._s(e.marker.lat)+", "+e._s(e.marker.lng))]),r("p",[e._v("Center is at "+e._s(e.currentCenter)+" and the zoom is: "+e._s(e.currentZoom))]),r("p",[r("span",[e._v("Jour : "+e._s(e.selectedDay))]),r("span",[e._v(". Heure : "+e._s(e.selectedHour))])])])},h=[],v={name:"Debug",components:{LControl:m["a"]},props:["marker","currentCenter","currentZoom","selectedDay","selectedHour"]},g=v,y=r("2877"),b=Object(y["a"])(g,f,h,!1,null,null,null),_=b.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.geojson?r("div",e._l(e.geojson,(function(e,t){return r("l-geo-json",{key:t,attrs:{geojson:e,optionsStyle:e.style}})})),1):e._e(),r("l-control",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"legend",attrs:{position:"bottomleft"}},[r("div",{staticClass:"lds-dual-ring"})])],1)},w=[],j=r("044a"),O=(r("d81d"),r("d3b7"),r("3ca3"),r("ddb0"),{possibleDays:[["2020-07-02","Lundi - Vendredi"],["2020-07-04","Samedi"],["2020-07-05","Dimanche"]],possibleHours:[["06%3A00%3A00.000Z","8h"],["11%3A00%3A00.000Z","13h"],["15%3A00%3A00.000Z","17h"],["18%3A00%3A00.000Z","20h"],["21%3A00%3A00.000Z","23h"]],durations:[{minutes:45,color:"red"},{minutes:30,color:"yellow"},{minutes:10,color:"green"}]});function x(e,t,r,n,o){var a="https://benjexperiments.tech/graphhopper/isochrone?",s="type=json&locale=fr&profile=pt&result=polygon&buckets=1",i="&time_limit="+o,l="&point="+e+","+t,u="&pt.earliest_departure_time="+r+"T"+n,c=a+s+i+l+u;return c}function C(e,t,r,n,o,a){var s=x(e,t,r,n,o),i={method:"GET"};return fetch(s,i).then((function(e){return e.json()})).then((function(e){var t=e.polygons;return t.style={color:a},t}))}function D(e,t,r,n){var o=O.durations.map((function(o){return C(e,t,r,n,60*o.minutes,o.color)}));return Promise.all(o)}var L={name:"Isochrone",components:{LGeoJson:j["a"],LControl:m["a"]},props:["lat","lng","marker","day","hour"],data:function(){return{geojson:null,loading:!0}},created:function(){this.updateIsochrone()},watch:{marker:function(){this.updateIsochrone()},day:function(){this.updateIsochrone()},hour:function(){this.updateIsochrone()}},methods:{updateIsochrone:function(){var e=this;this.loading=!0,D(this.marker.lat,this.marker.lng,this.day,this.hour).then((function(t){e.geojson=t,e.loading=!1}))}}},M=L,H=(r("b9e9"),Object(y["a"])(M,k,w,!1,null,"546d157b",null)),A=H.exports,P={name:"MainMap",components:{LMap:u["a"],LTileLayer:c["a"],LMarker:p["a"],LTooltip:d["a"],LControl:m["a"],Debug:_,Isochrone:A},data:function(){return{zoom:13,center:Object(l["latLng"])(47.910244,1.907501),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',marker:Object(l["latLng"])(47.910244,1.907501),currentZoom:11.5,currentCenter:Object(l["latLng"])(47.910244,1.907501),showParagraph:!1,mapOptions:{zoomSnap:.5},showMap:!0,parameterConfig:O,selectedDay:O.possibleDays[0][0],selectedHour:O.possibleHours[0][0]}},methods:{zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){}}},S=P,z=(r("a093"),Object(y["a"])(S,s,i,!1,null,null,null)),I=z.exports,Z={name:"App",components:{MainMap:I}},T=Z,U=(r("034f"),Object(y["a"])(T,o,a,!1,null,null,null)),E=U.exports;r("6cc5");delete l["Icon"].Default.prototype._getIconUrl,l["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")}),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(E)}}).$mount("#app")},"85ec":function(e,t,r){},"93df":function(e,t,r){},a093:function(e,t,r){"use strict";var n=r("debb"),o=r.n(n);o.a},b9e9:function(e,t,r){"use strict";var n=r("93df"),o=r.n(n);o.a},debb:function(e,t,r){}});
//# sourceMappingURL=app.bd35b058.js.map